{% extends 'base.html' %} {% from 'macro.html' import Form_off_label, Form %}
{% block content %}

    <nav class="navbar navbar-light shadow-none">
        <button id="crear" title="Crear plan de estudio" class="btn btn-outline-primary">
            Crear
        </button>
        <form class="form-inline">
            <input type="search" class="form-control" id="search" placeholder="Buscar plan de estudio" aria-label="Search" onkeyup="myFunction()" size='40'>
        </form>
    </nav>

    <div id="content-wrapper" class="d-flex flex-column">
        <div class="content">
            <div class="container-fluid">
                <!-- modal to details of the studies plan -->
                <div id="staticBackdrop" class="modal fade hide in" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="False">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header bg-gradient-primary">
                                <h3>
                                    <h3 style="color: white;">Plan de Estudio</h3>
                                </h3>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal" style="color: white;">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>

                            <div class="modal-body">
                                {# {% include 'forms/stady_plan_form.html.j2' %} #}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- modal to create studies plan -->

                <div class="modal fade" id="studyPlan" tabindex="-1" role="dialog" aria-labelledby="studyPlanTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">

                            <div class="modal-body">
                                <div class="modal-header border-bottom-0">
                                    <h3 class="m-auto">
                                        <h3 class="modal-title m-auto text-primary" id="studyPlan">Crear Plan De Estudio</h3>
                                    </h3>
                                    <button type="button" class="close btn btn-sm" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>

                                <form action="" method="POST" autocomplete="off">
                                    {# <div class="form-group my-4">
                                        {{ Form_off_label(plan_form.name, class="form-control form-control-lg text-center", placeholder="Nombre Del Plan De Estudio") }}
                                    </div>
                                    
                                    <div class="text-center form-group">
                                        {{ Form_off_label(plan_form.submit, class="btn btn-lg btn-primary", value="Guardar") }}
                                    </div> #}
                                </form>
                            </div>

                        </div>
                    </div>
                </div>

                <ol class="breadcrumb">
                    <li class="breadcrumb-item active">
                        Actividades(0)
                    </li>
                                    
                    <li class="breadcrumb-item">
                        <a href="/subjects/finished" class="">
                            Objetivos completados(0)
                        </a>
                    </li>
                </ol>

                {% if num_plan > 0 %}
                <div class="row m-auto margenes">
                    
                    <div class="table-responsive">
                        {% include 'messages.html' %}
                            
                        <table class="table table-striped table-borderless table-hover model-list bg-white rounded-lg" id="mytable">
                            
                            <thead class="bordes>
                                <tr">
                                    <th></th>
                                    <th class="text-primary column-header cursor" onclick="sortTable(0)">Titulo</th>
                                    <th class="text-primary column-header cursor" onclick="sortTable(1)">Dia</th>
                                    <th class="text-primary column-header cursor" onclick="sortTable(2)">Hora de Inicio</th>
                                    <th></th>
                                </tr>
                            </thead>
                                    
                            <tbody>
                                {% for i in range(num_plan)  %}
                                    <tr>
                                        <td class="list-buttons-column">
                                            <a href="{{ url_for('auth.edit', id=stady_plan[i].id) }}" class="btn shadow-none btn-outlne text-info my-sm-0">
                                                <span title="Editar" class="fas fa-pencil-alt glyphicon glyphicon-pencil"></span>
                                            </a>
                                            <a href=" {{ url_for('auth.delete', id=stady_plan[i].id) }} " class="btn btn-delete shadow-none btn-outlie text-danger my-sm-0">
                                                <span title="Eliminar" class="fa fa-trash glyphicon glyphicon-trash"></span>
                                            </a>
                                        </td>
                                        <td> {{ stady_plan[i].name }} </td>
                                        <td>
                                            {% if stady_plan[i].detalle | length > 0 %}
                                                {{ stady_plan[i].detalle[0] }}
                                            {% else %}
                                                <a href="" class=" cursor" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                                    Asignar
                                                </a>
                                                <div class="dropdown-menu">
                                                    <a href="#" data-toggle="modal" data-target="#staticBackdrop" class="dropdown-item cursor">Nuevo</a>
                                                    <a href="#" data-toggle="modal" data-target="#assingTeacher" class="dropdown-item dropright cursor" >Existente</a>
                                                </div>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <a href="#" class="btn-outline btn-lg text-success my-2 my-ms-0">
                                                <span title="Marcar como cursada" class="fas fa-check glyphicon glyphicon-check"></span>
                                            </a>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}